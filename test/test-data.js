/**
 * Test data for the Backpack Minigame
 * This file contains sample objects and configurations for testing
 */
window.testObjects = [
    {
        id: 'bong',
        name: 'Bong',
        width: 2,
        height: 4,
        color: 'hsl(20, 70%, 60%)',
        sprite: 'bong',
        description: 'A glass bong.'
    },
    {
        id: 'cash',
        name: 'Cash',
        width: 1,
        height: 2,
        color: 'hsl(40, 70%, 60%)',
        sprite: 'cash',
        description: 'A stack of cash.'
    },
    {
        id: 'cellphone',
        name: 'Cellphone',
        width: 1,
        height: 2,
        color: 'hsl(60, 70%, 60%)',
        sprite: 'cellphone',
        description: 'A modern cellphone.'
    },
    {
        id: 'cheetos',
        name: 'Cheetos',
        width: 1,
        height: 2,
        color: 'hsl(80, 70%, 60%)',
        sprite: 'cheetos',
        description: 'A bag of Cheetos snacks.'
    },
    {
        id: 'cups',
        name: 'Cups',
        width: 1,
        height: 3,
        color: 'hsl(100, 70%, 60%)',
        sprite: 'cups',
        description: 'A stack of plastic cups.'
    },
    {
        id: 'dice',
        name: 'Dice',
        width: 1,
        height: 1,
        color: 'hsl(120, 70%, 60%)',
        sprite: 'dice',
        description: 'A pair of dice.'
    },
    {
        id: 'fabreeze',
        name: 'Fabreeze',
        width: 1,
        height: 3,
        color: 'hsl(140, 70%, 60%)',
        sprite: 'fabreeze',
        description: 'A can of Fabreeze air freshener.'
    },
    {
        id: 'fleacollar',
        name: 'Fleacollar',
        width: 1,
        height: 1,
        color: 'hsl(160, 70%, 60%)',
        sprite: 'fleacollar',
        description: 'A flea collar for pets.'
    },
    {
        id: 'jestervest',
        name: 'Jestervest',
        width: 3,
        height: 1,
        color: 'hsl(180, 70%, 60%)',
        sprite: 'jestervest',
        description: 'A colorful jester vest.'
    },
    {
        id: 'lighterern',
        name: 'Lighterern',
        width: 1,
        height: 1,
        color: 'hsl(200, 70%, 60%)',
        sprite: 'lighterern',
        description: 'A lighter (ern style).'
    },
    {
        id: 'lightergrt',
        name: 'Lightergrt',
        width: 1,
        height: 1,
        color: 'hsl(220, 70%, 60%)',
        sprite: 'lightergrt',
        description: 'A lighter (grt style).'
    },
    {
        id: 'lighterram',
        name: 'Lighterram',
        width: 1,
        height: 1,
        color: 'hsl(240, 70%, 60%)',
        sprite: 'lighterram',
        description: 'A lighter (ram style).'
    },
    {
        id: 'lollipops',
        name: 'Lollipops',
        width: 1,
        height: 1,
        color: 'hsl(260, 70%, 60%)',
        sprite: 'lollipops',
        description: 'A handful of lollipops.'
    },
    {
        id: 'matchbook',
        name: 'Matchbook',
        width: 1,
        height: 1,
        color: 'hsl(280, 70%, 60%)',
        sprite: 'matchbook',
        description: 'A small matchbook.'
    },
    {
        id: 'orcking',
        name: 'Orcking',
        width: 1,
        height: 1,
        color: 'hsl(300, 70%, 60%)',
        sprite: 'orcking',
        description: 'A mysterious orc king figurine.'
    },
    {
        id: 'papertowels',
        name: 'Papertowels',
        width: 2,
        height: 3,
        color: 'hsl(320, 70%, 60%)',
        sprite: 'papertowels',
        description: 'A roll of paper towels.'
    },
    {
        id: 'pointer',
        name: 'Pointer',
        width: 1,
        height: 1,
        color: 'hsl(340, 70%, 60%)',
        sprite: 'pointer',
        description: 'A laser pointer.'
    },
    {
        id: 'romancandel',
        name: 'Romancandel',
        width: 1,
        height: 5,
        color: 'hsl(360, 70%, 60%)',
        sprite: 'romancandel',
        description: 'A roman candle firework.'
    },
    {
        id: 'shield',
        name: 'Shield',
        width: 3,
        height: 5,
        color: 'hsl(30, 70%, 60%)',
        sprite: 'shield',
        description: 'A small shield.'
    },
    {
        id: 'smokes',
        name: 'Smokes',
        width: 1,
        height: 2,
        color: 'hsl(60, 70%, 60%)',
        sprite: 'smokes',
        description: 'A pack of cigarettes.'
    }
];

// Sprite paths (you'll need to add actual image files)
window.testSprites = {
    'backpack': 'assets/sprites/backpack_bg.png',
    'bong': 'assets/sprites/bong.png',
    'cash': 'assets/sprites/cash401.png',
    'cellphone': 'assets/sprites/cellphone.png',
    'cheetos': 'assets/sprites/cheetos.png',
    'cups': 'assets/sprites/cups.png',
    'dice': 'assets/sprites/dice.png',
    'fabreeze': 'assets/sprites/fabreeze.png',
    'fleacollar': 'assets/sprites/fleacollar.png',
    'jestervest': 'assets/sprites/jestervest.png',
    'lighterern': 'assets/sprites/lighterern.png',
    'lightergrt': 'assets/sprites/lightergrt.png',
    'lighterram': 'assets/sprites/lighterram.png',
    'lollipops': 'assets/sprites/lollipops.png',
    'matchbook': 'assets/sprites/matchbook.png',
    'orcking': 'assets/sprites/orcking.png',
    'papertowels': 'assets/sprites/papertow.png',
    'pointer': 'assets/sprites/pointer.png',
    'romancandel': 'assets/sprites/romancand.png',
    'shield': 'assets/sprites/sheild.png',
    'smokes': 'assets/sprites/smokes.png',
};

// Different test configurations
window.testConfigs = {
    small: {
        backpackWidth: 4,
        backpackHeight: 4,
        cellSize: 60,
        objects: window.testObjects.slice(0, 5) // Just first 5 objects
    },
    medium: {
        backpackWidth: 5,
        backpackHeight: 6,
        cellSize: 50,
        objects: window.testObjects.slice(0, 8) // First 8 objects
    },
    large: {
        backpackWidth: 6,
        backpackHeight: 8,
        cellSize: 45,
        objects: window.testObjects // All objects
    },
    puzzle: {
        backpackWidth: 4,
        backpackHeight: 5,
        cellSize: 55,
        objects: [
            // Specific puzzle configuration
            { id: 'block1', name: 'Block 1', width: 2, height: 2, color: '#ff6b6b' },
            { id: 'block2', name: 'Block 2', width: 3, height: 1, color: '#4ecdc4' },
            { id: 'block3', name: 'Block 3', width: 1, height: 3, color: '#45b7d1' },
            { id: 'block4', name: 'Block 4', width: 2, height: 1, color: '#96ceb4' },
            { id: 'block5', name: 'Block 5', width: 1, height: 2, color: '#ffeaa7' },
            { id: 'block6', name: 'Block 6', width: 1, height: 1, color: '#dfe6e9' }
        ]
    }
};

// Twine integration test data
window.twineTestData = {
    // Simulates data coming from a Twine passage
    passage: "backpack_minigame",
    variables: {
        backpackSize: "medium",
        availableItems: [
            "book", "potion_health", "sword", "food", "rope"
        ],
        requiredItems: ["book", "sword"], // Items that must be packed
        previouslyPacked: {} // Items already packed from previous attempts
    }
};

// Helper function to generate random test configuration
window.generateRandomTest = function () {
    const widths = [4, 5, 6];
    const heights = [4, 5, 6, 7, 8];
    const numObjects = Math.floor(Math.random() * 6) + 5; // 5-10 objects

    const randomObjects = [];
    for (let i = 0; i < numObjects; i++) {
        randomObjects.push({
            id: `item_${i}`,
            name: `Item ${i + 1}`,
            width: Math.floor(Math.random() * 3) + 1, // 1-3
            height: Math.floor(Math.random() * 3) + 1, // 1-3
            color: `hsl(${Math.random() * 360}, 70%, 50%)`
        });
    }

    return {
        backpackWidth: widths[Math.floor(Math.random() * widths.length)],
        backpackHeight: heights[Math.floor(Math.random() * heights.length)],
        cellSize: 50,
        objects: randomObjects
    };
};

// Test function to validate object placement
window.validateTestSolution = function (placedObjects, requiredItems) {
    const allRequired = requiredItems.every(item => placedObjects[item] === true);
    const packedCount = Object.keys(placedObjects).length;

    return {
        success: allRequired,
        packedCount: packedCount,
        missingRequired: requiredItems.filter(item => !placedObjects[item]),
        score: allRequired ? packedCount * 10 : 0
    };
};